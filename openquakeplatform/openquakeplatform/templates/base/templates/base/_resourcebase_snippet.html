{% load i18n %}
{% verbatim %}

<div class="row resourcebase-snippet">
  <div ng-if="results.length == 0" ng-cloak>
    {% endverbatim %}
    <div><h3 class="resourcebase-no-content">{% trans "No content created yet." %}</h3></div>
    {% verbatim %}
  </div>
  <article ng-repeat="item in results" resource_id="{{ item.id }}" ng-cloak class="ng-cloak">
    <div class="col-xs-12 item-container">
      <div class="col-xs-12 profile-avatar">
        <div class="col-xs-4 item-thumb">
          <a href="{{ item.detail_url }}">
            <img ng-src="{{ item.thumbnail_url }}" />
          </a>
        </div>
        <div class="col-xs-8 item-details">
          <div class="row">
            <div class="col-xs-10">
              <h4>
                  <a ng-if="item.detail_url.indexOf('/layers/') > -1" href="{{ item.detail_url }}"><i class="fa fa-clone"></i> {{ item.title }}</a>
                  <a class="oq-map" ng-if="item.detail_url.indexOf('/maps/') > -1" href="{{ item.detail_url }}"><i class="fa fa-map-marker"></i> {{ item.title }}</a>
                  <a ng-if="item.detail_url.indexOf('/documents/') > -1" href="{{ item.detail_url }}"><i class="fa fa-file"></i> {{ item.title }}</a>
              </h4>

              </h4>
            </div>
            {% endverbatim %}

            {% if not request.user_agent.is_mobile %}
              {% if facet_type == 'layers' %}
              <div class="col-xs-2">
                <h4>
                  <button
                    class="btn btn-default btn-xs pull-right"
                    ng-if="cart"
                    ng-click="cart.toggleItem(item)"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="{% trans "Select" %}"><i ng-class="cart.getFaClass(item.id)" class="fa fa-lg"></i></button>
                </h4>
              </div>
              {% endif %}
            {% endif %}
          </div>
          <em ng-if="item.store_type == 'remoteStore'">
            <span ng-if="item.online == true"><i class="fa fa-power-off text-success"></i> {% trans "Service is" %} {% trans "online" %}</span>
            <span ng-if="item.online == false"><i class="fa fa-power-off text-danger"></i> {% trans "Service is" %} {% trans "offline" %}</span>
          </em>
          <div class="alert alert-danger" ng-if="item.dirty_state == true">{% trans "SECURITY NOT YET SYNCHRONIZED" %}
              {% verbatim %}<a href="{{ item.detail_url }}" class="btn btn-primary btn-block" data-dismiss="modal" ng-click="securityRefreshButton($event)">{% endverbatim %}{% trans "Sync permissions immediately" %}</a>
          </div>
          <div class="alert alert-warning" ng-if="item.dirty_state == false && item.is_approved == false">{% trans "PENDING APPROVAL" %}</div>
          <div class="alert alert-danger" ng-if="item.dirty_state == false && item.is_approved == true && item.is_published == false">{% trans "UNPUBLISHED" %}</div>

          {% verbatim %}
          <div class="abstract" ng-bind-html="item.abstract | limitTo: 150"></div>
          <p class="abstract">{{ item.abstract.length  > 150 ? '...' : ''}}</p>
          <div class="row">
            <div class="col-xs-12 item-items">
              <ul class="list-inline">
                <li><a href="{{ item.site_url }}people/profile/{{ item.owner__username }}"><i class="fa fa-user"></i>{{ item.owner_name }}</a></li>
                <li><a href="{{ item.detail_url }}#info"><i class="fa fa-calendar-o"></i>{{ item.date|date:'d MMM y' }}</a></li>
          {% endverbatim %}
            {% if not request.user_agent.is_mobile %}
                {% verbatim %}      
                <li><a href="{{ item.detail_url }}"><i class="fa fa-eye"></i>{{ item.popular_count }}</a></li>
                {% endverbatim %}
                  {% if user.is_authenticated and not READ_ONLY_MODE %}
                    {% verbatim %}
                    <li><a ng-if="item.detail_url.indexOf('/layers/') > -1" href="{% endverbatim %}{% url "new_map" %}?layer={% verbatim %}{{ item.detail_url.substring(8) }}">
                      {% endverbatim %}
                      <i class="fa fa-map-marker"></i>{% trans "Create a Map" %}</a>
                    </li>
                  {% endif %}
                {% verbatim %}
                <li><a ng-if="item.detail_url.indexOf('/maps/') > -1" href="{{ item.site_url }}maps/{{item.id}}/view">
                  {% endverbatim %}
                  <i class="fa fa-map-marker"></i>{% trans "View Map" %}</a>
              {% endif %}                  
                  {% verbatim %}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </article>
</div>
{% endverbatim %}
